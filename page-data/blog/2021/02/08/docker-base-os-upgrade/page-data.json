{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/blog/2021/02/08/docker-base-os-upgrade/",
    "result": {"data":{"blog":{"html":"<div class=\"paragraph\">\n<p>Beginning with Jenkins 2.279 and Jenkins 2.263.4, the Jenkins project is upgrading the base operating system and Java version used in the <code>jenkins/jenkins:latest</code> and <code>jenkins/jenkins:lts</code> images.\nThe update replaces OpenJDK 8u242 with AdoptOpenJDK 8u282 and replaces Debian 9 (<a href=\"https://www.debian.org/releases/stretch/\">\"Stretch\"</a>) with Debian 10 (<a href=\"https://www.debian.org/releases/buster/\">\"Buster\"</a>).</p>\n</div>\n<div class=\"paragraph\">\n<p><span class=\"image right center\"><img src=\"/images/docker/dockerJenkins.png\" alt=\"Jenkins and Docker\" height=\"224\"></span></p>\n</div>\n<div class=\"sect1\">\n<h2 id=\"why\"><a class=\"anchor\" href=\"#why\"></a>Why?</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>We&#8217;re changing the base image so that we have a better supported operating system and a more current Java release for Jenkins controllers.</p>\n</div>\n<div class=\"sect2\">\n<h3 id=\"better-supported-operating-system\"><a class=\"anchor\" href=\"#better-supported-operating-system\"></a>Better supported operating system</h3>\n<div class=\"paragraph\">\n<p>The Docker images provided by the Jenkins project rely on the operating system security processes of the operating system provider.</p>\n</div>\n<div class=\"paragraph\">\n<p>Our Docker images have used Debian 9 (<a href=\"https://www.debian.org/releases/stretch/\">\"Stretch\"</a>) for multiple years.\nDebian 9 security updates have been <a href=\"https://www.debian.org/releases/stretch/\">discontinued as of July 6, 2020</a>.\nDebian 9 Long Term Support security updates will be discontinued at the <a href=\"https://www.debian.org/releases/stretch/\">end of June 2022</a>.\nThe upgrade to Debian 10 keeps us on an operating system maintained by the operating system security team.</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"more-current-java-release\"><a class=\"anchor\" href=\"#more-current-java-release\"></a>More current Java release</h3>\n<div class=\"paragraph\">\n<p>The Debian 9 Docker images were based on the <a href=\"https://hub.docker.com/layers/openjdk/library/openjdk/8-jdk-stretch/images/sha256-6896e96ce729fd54da25b8d831400773efeef39780c65bffb2d64c1412189455\"><code>openjdk:8-jdk-stretch</code> Docker image</a>.\nThe last update to that image was one year ago with the release of JDK 8u242.\nWe need a maintained Docker base image that keeps pace with JDK releases and operating system updates so that the controller is running the most recent Java updates and most recent operating system updates.</p>\n</div>\n<div class=\"paragraph\">\n<p>Other Jenkins controller images have already switched from using <code>openjdk</code> base images to instead use base images provided by <a href=\"https://projects.eclipse.org/projects/adoptium\">Eclipse Adoptium</a>.\n<a href=\"https://projects.eclipse.org/projects/adoptium\">Eclipse Adoptium</a> is the Eclipse project formed when <a href=\"https://blog.adoptopenjdk.net/2020/06/adoptopenjdk-to-join-the-eclipse-foundation/\">AdoptOpenJDK joined the Eclipse Foundation</a>.\nThis change adapts the <code>jenkins/jenkins:latest</code> and <code>jenkins/jenkins:lts</code> images to use the Adoptium JDK images in the same pattern as is already used for the Jenkins JDK 11 Docker images like <code>jenkins/jenkins:lts-jdk11</code>.\nThe Jenkins Platform SIG has enjoyed very good results in our interactions with the Eclipse Adoptium project.\nWe look forward to continuing our collaboration with them.</p>\n</div>\n<div class=\"paragraph\">\n<p>Thanks a lot to <a href=\"/blog/authors/slide_o_mix/\">Alex Earl</a> and <a href=\"https://github.com/james-crowley\">Jim Crowley</a> for the image build restructuring groundwork that made the image upgrade possible!\nAlso thanks to <a href=\"/blog/authors/oleg_nenashev/\">Oleg Nenashev</a> and other contributors for their reviews and testing.</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"packaging-changes\"><a class=\"anchor\" href=\"#packaging-changes\"></a>Packaging changes</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The Jenkins Docker image based on Debian 10 (\"Buster\") includes some different packages than Debian 9 (\"Stretch\").\nSome packages have been removed because they are no longer supported by their communities.\nSome packages have been removed due to infrequent and decreasing use.\nUsers of the Jenkins Docker images may need to extend their definition of their Docker image to include packages that are no longer included in the base image.</p>\n</div>\n<div class=\"sect2\">\n<h3 id=\"scm-packages-removed\"><a class=\"anchor\" href=\"#scm-packages-removed\"></a>SCM packages removed</h3>\n<div class=\"paragraph\">\n<p>The following source control management packages are no longer included in the Jenkins controller images for <code>jenkins/jenkins:latest</code> or for <code>jenkins/jenkins:lts</code>:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>bzr</p>\n</li>\n<li>\n<p>mercurial</p>\n</li>\n<li>\n<p>subversion</p>\n</li>\n</ul>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"other-packages-removed\"><a class=\"anchor\" href=\"#other-packages-removed\"></a>Other packages removed</h3>\n<div class=\"paragraph\">\n<p>Additional packages that are no longer included in the Jenkins controller images include:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>bzip2</p>\n</li>\n<li>\n<p>mime-support</p>\n</li>\n<li>\n<p>python (the Python project stopped supporting Python 2 January 1, 2020)</p>\n</li>\n<li>\n<p>xz-utils</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>A detailed list of the exact package changes is available in the <a href=\"https://github.com/jenkinsci/docker/pull/1070\">pull request</a>.</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"upgrade-and-compatibility-notes\"><a class=\"anchor\" href=\"#upgrade-and-compatibility-notes\"></a>Upgrade and compatibility notes</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The Jenkins controller images are designed to be extended to meet user needs.\nCustom Jenkins controller images can be created from the base images and are designed to allow additional Jenkins plugins and additional operating system packages.</p>\n</div>\n<div class=\"paragraph\">\n<p>For example, the <a href=\"/doc/book/installing/docker/\">Installing Docker</a> instructions illustrate a technique to install the <a href=\"https://plugins.jenkins.io/blueocean\">Blue Ocean plugins</a> and some operating system packages in a custom Docker image.</p>\n</div>\n<div class=\"sect2\">\n<h3 id=\"docker-image-with-subversion\"><a class=\"anchor\" href=\"#docker-image-with-subversion\"></a>Docker image with Subversion</h3>\n<div class=\"paragraph\">\n<p>The following Docker image definition installs the most recent <a href=\"/download/lts/\">Jenkins Long Term Support</a> release with the <a href=\"https://plugins.jenkins.io/subversion\">subversion plugin</a> and the operating system <code>subversion</code> command:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code>FROM jenkins/jenkins:lts\nUSER root\nRUN apt-get update &amp;&amp; \\\n    apt-get install -y --no-install-recommends subversion\nUSER jenkins\nRUN jenkins-plugin-cli --plugins subversion:2.14.0</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>Build a new docker image from this Dockerfile and assign the image a meaningful name, e.g. \"myjenkins-subversion:1.1\":</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-bash\" data-lang=\"bash\">docker build -t myjenkins-subversion:1.1 .</code></pre>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"docker-image-with-mercurial\"><a class=\"anchor\" href=\"#docker-image-with-mercurial\"></a>Docker image with Mercurial</h3>\n<div class=\"paragraph\">\n<p>The following Docker image definition installs the most recent <a href=\"/download/weekly/\">Jenkins Weekly</a> release with the <a href=\"https://plugins.jenkins.io/mercurial\">mercurial plugin</a> and the operating system <code>hg</code> command:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code>FROM jenkins/jenkins:latest\nUSER root\nRUN apt-get update &amp;&amp; \\\n    apt-get install -y --no-install-recommends mercurial\nUSER jenkins\nRUN jenkins-plugin-cli --plugins mercurial:2.12</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>Build a new docker image from this Dockerfile and assign the image a meaningful name, e.g. \"myjenkins-mercurial:1.1\":</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-bash\" data-lang=\"bash\">docker build -t myjenkins-mercurial:1.1 .</code></pre>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"whats-next\"><a class=\"anchor\" href=\"#whats-next\"></a>What&#8217;s next?</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>We will continue Docker image updates as new Java versions are released.</p>\n</div>\n<div class=\"paragraph\">\n<p>If you are interested in new features in Jenkins Docker packaging,\nstay tuned for future announcements!\nThere are multiple ongoing initiatives which you can find on the <a href=\"/project/roadmap/\">public Jenkins roadmap</a>.\nSome stories:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Switching to AdoptOpenJDK.</p>\n</li>\n<li>\n<p>General availability of Windows images.</p>\n</li>\n<li>\n<p>Support for more platforms (AArch64, IBM s390x, PowerPC).</p>\n</li>\n<li>\n<p>Introducing multi-platform Docker images.</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>If you are interested in any of these projects and would like to contribute,\nplease reach out to the <a href=\"/sigs/platform\">Platform Special Interest Group</a> which coordinates initiatives related to Jenkins in Docker.</p>\n</div>\n</div>\n</div>","id":"cf843c22-ea33-5664-9347-9c1a8010c2ed","title":"Docker image updates","date":"2021-02-08T00:00:00.000Z","slug":"/blog/2021/02/08/docker-base-os-upgrade/","links":{"discourse":""},"authors":[{"avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#786888","images":{"fallback":{"src":"/gatsby-jenkins-io/static/b6d1673d3033c967ff61ee8d4c73aefc/60e20/markewaite.jpg","srcSet":"/gatsby-jenkins-io/static/b6d1673d3033c967ff61ee8d4c73aefc/f4523/markewaite.jpg 32w,\n/gatsby-jenkins-io/static/b6d1673d3033c967ff61ee8d4c73aefc/6859a/markewaite.jpg 64w,\n/gatsby-jenkins-io/static/b6d1673d3033c967ff61ee8d4c73aefc/60e20/markewaite.jpg 128w,\n/gatsby-jenkins-io/static/b6d1673d3033c967ff61ee8d4c73aefc/57001/markewaite.jpg 256w","sizes":"(min-width: 128px) 128px, 100vw"},"sources":[{"srcSet":"/gatsby-jenkins-io/static/b6d1673d3033c967ff61ee8d4c73aefc/1fd06/markewaite.webp 32w,\n/gatsby-jenkins-io/static/b6d1673d3033c967ff61ee8d4c73aefc/a7803/markewaite.webp 64w,\n/gatsby-jenkins-io/static/b6d1673d3033c967ff61ee8d4c73aefc/1a87d/markewaite.webp 128w,\n/gatsby-jenkins-io/static/b6d1673d3033c967ff61ee8d4c73aefc/27a57/markewaite.webp 256w","type":"image/webp","sizes":"(min-width: 128px) 128px, 100vw"}]},"width":128,"height":140}}},"blog":null,"github":"markewaite","html":"<div class=\"paragraph\">\n<p>Mark is the <a href=\"/project/team-leads/#documentation\">Jenkins Documentation Officer</a>, a long-time Jenkins user and contributor, and maintains the <a href=\"https://plugins.jenkins.io/git\">git plugin</a> and the <a href=\"https://plugins.jenkins.io/git-client\">git client plugin</a>.\nHe is active in <a href=\"/sigs/\">Jenkins special interest groups</a> including the <a href=\"/sigs/docs/\">Docs SIG</a>, <a href=\"/sigs/platform\">Platform SIG</a>, and <a href=\"/sigs/advocacy-and-outreach\">Advocacy SIG</a>.</p>\n</div>","id":"markewaite","irc":"markewaite","linkedin":"markwaite","name":"Mark Waite","slug":"/blog/authors/markewaite","twitter":"MarkEWaite"}]}},"pageContext":{"next":"/blog/2021/02/16/contributor-summit-online/","previous":"/blog/2021/01/26/new-ebook-build-deploy-and-automate-great-stuff-with-jenkins/","id":"cf843c22-ea33-5664-9347-9c1a8010c2ed"}},
    "staticQueryHashes": ["1271460761","3649515864"]}