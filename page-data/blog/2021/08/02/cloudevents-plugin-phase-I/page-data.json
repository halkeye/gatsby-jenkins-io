{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/blog/2021/08/02/cloudevents-plugin-phase-I/",
    "result": {"data":{"blog":{"html":"<div class=\"paragraph\">\n<p><span class=\"image\"><img src=\"/images/post-images/2021-08-cloudevents-plugin/jcdevents.JPG\" alt=\"CloudEvents Plugin for Jenkins\"></span></p>\n</div>\n<div class=\"sect1\">\n<h2 id=\"the-what-why-and-how-of-interoperability\"><a class=\"anchor\" href=\"#the-what-why-and-how-of-interoperability\"></a>The What, Why and How of Interoperability</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>With workloads and teams becoming more diverse and complex, there is an increasing need to automate various tasks in the CI/CD ecosystem of an application as a way to decrease complexity that can come with CI/CD.</p>\n</div>\n<div class=\"paragraph\">\n<p>A more diverse team working across different aspects of the application requires a diverse suite of CI/CD tools too, to test and deliver to a wide range of users. More often than not, we need these tools to work together and exchange data to form an effective CI/CD pipeline. However, chaining multiple services together can very easily increase complexity.</p>\n</div>\n<div class=\"paragraph\">\n<p>How? Each of these services use a different \"language\" to communicate and represent the entity(an event) which occured inside that service. In order for another service to understand this \"language\", the service might need to develop customized clients and agents which specialize in understanding, traversing and taking-actions based on what was transmitted to it by the first service.</p>\n</div>\n<div class=\"paragraph\">\n<p>One can think of it as a translator who specializes in a language called ABC, and each service who wants to communicate with the service who uses ABC will have to employ this translator, or perhaps get another trained translator. And there is no guarantee that this translator will also help communicate with other services speaking a completely different language.</p>\n</div>\n<div class=\"paragraph\">\n<p>We can see how easily that can grow in cost and maintenance. A preferred way is to have a common language each of these services use and understand as a way to communicate amongst each other. This way, an event which is emitted using this common language will be available to any of the interested receiver without that receiver needing a special agent. This way of communication which uses a common/standard language also creates a way for agnostic communication where the sender or the receiver are sending and receiving data without creating a tight coupling between the two.</p>\n</div>\n<div class=\"paragraph\">\n<p>CloudEvents specification is enabling that loosely-coupled, event-driven communication between services by enforcing a common language which defines how an event should be emitted and transferred between systems.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"cloudevents-and-jenkins\"><a class=\"anchor\" href=\"#cloudevents-and-jenkins\"></a>CloudEvents and Jenkins</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><span class=\"image\"><a class=\"image\" href=\"https://cloudevents.io/\"><img src=\"https://cncf-branding.netlify.app/img/projects/cloudevents/stacked/color/cloudevents-stacked-color.png\" alt=\"CloudEvents Specification\"></a></span></p>\n</div>\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre class=\"nowrap\">A specification for describing event data in a common way</pre>\n</div>\n</div>\n<div class=\"quoteblock\">\n<blockquote>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Consistency</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Consistent across tools and services.</p>\n</li>\n</ul>\n</div>\n</li>\n<li>\n<p>Accessibility</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Common event format means common libraries, tooling, and infrastructure for delivering event data across environments can be used to develop with CloudEvents.</p>\n</li>\n</ul>\n</div>\n</li>\n<li>\n<p>Portability</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Easily port event-data across tools, truly leveraging event-driven architecture.</p>\n</li>\n</ul>\n</div>\n</li>\n</ul>\n</div>\n</blockquote>\n</div>\n<div class=\"paragraph\">\n<p>The CloudEvents plugin for Jenkins is developed as an effort to make interoperability between Jenkins and CI/CD tools much easier. The CloudEvents plugin for Jenkins is a GSoC project, and with the help from an amazing team of mentors, this project is aimed at enhancing event-driven interoperability between cloud-native CI/CD tools, making it easier for developers to include Jenkins in their CI/CD pipelines.</p>\n</div>\n<div class=\"paragraph\">\n<p>With this plugin, Jenkins can send and receive CloudEvents-compliant events to and from a wide variety of CI/CD tools using CloudEvents as their event format. This plugin makes chaining Jenkins with multiple tools like Tekton, Keptn, Knative and more, very easy.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"gsoc-phase-1-cloudevents-plugin\"><a class=\"anchor\" href=\"#gsoc-phase-1-cloudevents-plugin\"></a>GSoC Phase 1 - CloudEvents Plugin</h2>\n<div class=\"sectionbody\">\n<div class=\"sect2\">\n<h3 id=\"using-cloudevents-plugin-for-jenkins\"><a class=\"anchor\" href=\"#using-cloudevents-plugin-for-jenkins\"></a>Using CloudEvents plugin for Jenkins</h3>\n<div class=\"paragraph\">\n<p>This plugin allows Jenkins to be configured as a source and sink, which can emit and consume CloudEvents from a range of tools simultaneously.</p>\n</div>\n<div class=\"sect3\">\n<h4 id=\"jenkins-as-a-source\"><a class=\"anchor\" href=\"#jenkins-as-a-source\"></a>Jenkins as a Source</h4>\n<div class=\"paragraph\">\n<p>Configuring Jenkins as a Source enables Jenkins to send CloudEvents to a CloudEvents sink. For Phase-I of this project, there is support for HTTP Sinks, however CloudEvents supports various <a href=\"https://github.com/cloudevents/spec#cloudevents-documents\">protocol bindings</a>. Moving forward, there will also be support for other protocol bindings supported by CloudEvents.</p>\n</div>\n<div class=\"paragraph\">\n<p>To use Jenkins as a Source, the following configuration is needed:</p>\n</div>\n<div class=\"olist arabic\">\n<ol class=\"arabic\">\n<li>\n<p>Click on <strong>Manage Jenkins</strong> in the Root-Actions menu on the left.</p>\n</li>\n<li>\n<p>Inside the Manage Jenkins UI, search for <strong>Configure System</strong> under <strong>System Configuration</strong>.</p>\n</li>\n<li>\n<p>In the <strong>Configure System</strong> UI, scroll down to the CloudEvents plugin section, and this is where all the plugin configuration will be present. Here, you will have to enter the following information:</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Sink Type (For now, HTTP Protocol Binding for CloudEvent and HTTP Sink is supported.)</p>\n</li>\n<li>\n<p>Sink URL (URL of the Sink where you want the cloudevents sent.)</p>\n</li>\n<li>\n<p>Events you want sent to the CloudEvents sink URL.</p>\n</li>\n</ul>\n</div>\n</li>\n</ol>\n</div>\n<div class=\"paragraph\">\n<div class=\"title\">Step 1: Manage Jenkins</div>\n<p><span class=\"image\"><img src=\"/images/post-images/2021-08-cloudevents-plugin/manage_jenkins.png\" alt=\"Manage Jenkins\"></span></p>\n</div>\n<div class=\"paragraph\">\n<div class=\"title\">Step 2: Configure System</div>\n<p><span class=\"image\"><img src=\"/images/post-images/2021-08-cloudevents-plugin/configure_system.png\" alt=\"Configure System\"></span></p>\n</div>\n<div class=\"paragraph\">\n<div class=\"title\">Step 3: Configure CloudEvents Sink</div>\n<p><span class=\"image\"><img src=\"/images/post-images/2021-08-cloudevents-plugin/sink-type.png\" alt=\"Configure Sink to Receive Events\"></span></p>\n</div>\n<div class=\"paragraph\">\n<p>With Jenkins as a Source configured, Jenkins will send a POST request to the configured sink right as the selected event occurs inside Jenkins. Each event has a different payload specific to the type of the event emitted.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"event-types-payload-and-metadata\"><a class=\"anchor\" href=\"#event-types-payload-and-metadata\"></a>Event Types, Payload and Metadata</h4>\n<div class=\"paragraph\">\n<p>CloudEvents emitted by Jenkins follow the Binary-structure supported by CloudEvents, where the CloudEvents metadata is present inside the header, and the event-data is serialized as JSON, and present under request-body. This is the HTTP Protocol Binding for CloudEvents. Each protocol binding for CloudEvents follows a definition specific to the binding protocol.</p>\n</div>\n<div class=\"paragraph\">\n<p>For now, the following Jenkins events are supported in the CloudEvents Plugin-Jenkins as a Source:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://github.com/jenkinsci/cloudevents-plugin#queue-events\"><strong>Queue Events</strong></a></p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Queue Entered Waiting</p>\n</li>\n<li>\n<p>Queue Left</p>\n</li>\n</ul>\n</div>\n</li>\n<li>\n<p><a href=\"https://github.com/jenkinsci/cloudevents-plugin#build-events\"><strong>Build Events</strong></a></p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Job Started</p>\n</li>\n<li>\n<p>Job Completed</p>\n</li>\n<li>\n<p>Job Finalized</p>\n</li>\n<li>\n<p>Job Failed</p>\n</li>\n</ul>\n</div>\n</li>\n<li>\n<p><a href=\"https://github.com/jenkinsci/cloudevents-plugin#job-events\"><strong>Job Events</strong></a></p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Job Created</p>\n</li>\n<li>\n<p>Job Updated</p>\n</li>\n</ul>\n</div>\n</li>\n<li>\n<p><a href=\"https://github.com/jenkinsci/cloudevents-plugin#job-events\"><strong>Node Events</strong></a></p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Node Online</p>\n</li>\n<li>\n<p>Node Offline</p>\n</li>\n</ul>\n</div>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>Following is a table of the queue-entered waiting cloudevents metadata:</p>\n</div>\n<table class=\"tableblock frame-all grid-all stretch\">\n<colgroup>\n<col style=\"width: 50%;\">\n<col style=\"width: 50%;\">\n</colgroup>\n<thead>\n<tr>\n<th class=\"tableblock halign-left valign-top\">Event Metadata Headers Key</th>\n<th class=\"tableblock halign-left valign-top\">Event Metadata Headers Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">ce-specversion</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">1.0</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">ce-type</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">org.jenkinsci.queue.entered_waiting</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">ce-source</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">job/test</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">ce-id</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">123-456-789</p></td>\n</tr>\n</tbody>\n</table>\n<div class=\"paragraph\">\n<p><em>All of these fields will be present inside the HTTP-request headers since the CloudEvents format used here is the Binary structure.</em></p>\n</div>\n<div class=\"paragraph\">\n<p>Here&#8217;s also an example of event payload for the queue-entered event:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code>{\n  \"ciUrl\": \"http://3.101.116.80/\",\n  \"displayName\": \"test2\",\n  \"entryTime\": 1626611053609,\n  \"exitTime\": null,\n  \"startedBy\": \"shruti chaturvedi\",\n  \"jenkinsQueueId\": 25,\n  \"status\": \"ENTERED_WAITING\",\n  \"duration\": 0,\n  \"queueCauses\": [\n    {\n    \"reasonForWaiting\": \"In the quiet period. Expires in 0 ms\",\n    \"type\": \"entered_waiting\"\n    }\n  ]\n}</code></pre>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"try-the-plugin\"><a class=\"anchor\" href=\"#try-the-plugin\"></a>Try the Plugin</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The plugin will soon be releasing as the CloudEvents Plugin under <a href=\"https://plugins.jenkins.io/\" class=\"bare\">https://plugins.jenkins.io/</a>!!</p>\n</div>\n<div class=\"paragraph\">\n<p>Here&#8217;s the GitHub Repo of the Plugin: <a href=\"https://github.com/jenkinsci/cloudevents-plugin\">CloudEvents Plugin GitHub Repo</a></p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"demo\"><a class=\"anchor\" href=\"#demo\"></a>Demo</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Here is a video of the CloudEvents plugin with SockEye demoed at CDF GSoC Midterm Demos. <a href=\"https://github.com/n3wscott/sockeye\">SockEye</a> is an open-source tool which is designed as a way to visulaize cloudevents which are sent from a sink. In this demo, we will take a look at how Jenkins installed in a multi-node K8s environment work with the CloudEvents plugin as a Source, sending events over HTTP to the SockEye sink.</p>\n</div>\n<div class=\"videoblock\">\n<div class=\"content\">\n<iframe width=\"800\" height=\"420\" src=\"https://www.youtube.com/embed/iQPAp4DAHnY?rel=0\" frameborder=\"0\" allowfullscreen></iframe>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"next-steps\"><a class=\"anchor\" href=\"#next-steps\"></a>Next Steps</h3>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Jenkins as a Sink to allow Jenkins to trigger various actions as cloudevents are received from other tools.</p>\n</li>\n<li>\n<p>Enabling filtering on CloudEvents metadata to only act upon a certain kind of events recieved.</p>\n</li>\n<li>\n<p>Support for other protocol bindings in CloudEvents.</p>\n</li>\n</ul>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"feedback\"><a class=\"anchor\" href=\"#feedback\"></a>Feedback</h3>\n<div class=\"paragraph\">\n<p>We would absolutely love to hear your suggestions and feedback. This will help us understand the various use-cases for the plugin, and iterate to support a variety of bindings and formats.</p>\n</div>\n<div class=\"paragraph\">\n<p>Feel free to log an issue at the <a href=\"https://github.com/jenkinsci/cloudevents-plugin\">CloudEvents Plugin GitHub</a> repository. We are on CDF slack under <code>gsoc-2021-jenkins-cloudevents-plugin</code>. You can also start a discussion on <a href=\"https://community.jenkins.io\">community.jenkins.io</a>. I also love emails! Drop me one on: <a href=\"mailto:shrutichaturvedi16.sc@gmail.com\">shrutichaturvedi16.sc@gmail.com</a></p>\n</div>\n</div>\n</div>\n</div>","id":"4b818957-350e-52f3-a687-d86ebc43405d","title":"CloudEvents Plugin for Jenkins: Interoperability between Jenkins and other CI/CD Tools","date":"2021-08-02T00:00:00.000Z","slug":"/blog/2021/08/02/cloudevents-plugin-phase-I/","links":{"discourse":""},"authors":[{"avatar":{"childImageSharp":null},"blog":null,"github":"ShrutiC-git","html":"<div class=\"paragraph\">\n<p>Shruti Chaturvedi is the <strong>Founding Engineer</strong> for Klara, a startup to revolutionalize the shopping experience for beauty products.\nShe is an <strong>Oracle Certified Cloud Practitioner</strong>, and is developing solutions on Cloud where CI/CD is her primary focus. She has worked with Jenkins as a User, and is very excited to contribute to Jenkins and be a part of the community.</p>\n</div>","id":"ShrutiC-git","irc":null,"linkedin":null,"name":"Shruti Chaturvedi","slug":"blog/author/shrutic-git","twitter":"shruti_tech"}]}},"pageContext":{"next":"/blog/2021/08/17/docker-images-use-jdk-11-by-default/","previous":"/blog/2021/07/31/remoting-monitoring-phase-1/","id":"4b818957-350e-52f3-a687-d86ebc43405d"}},
    "staticQueryHashes": ["1271460761","3649515864"]}