{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/blog/2016/09/08/continuous-delivery-of-infra/",
    "result": {"data":{"blog":{"html":"<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<i class=\"fa icon-note\" title=\"Note\"></i>\n</td>\n<td class=\"content\">\nThis is a guest post by Jenkins World speaker\n<a href=\"https://github.com/rtyler\">R Tyler Croy</a>, infrastructure maintainer for the\nJenkins project.\n</td>\n</tr>\n</table>\n</div>\n<div class=\"paragraph\">\n<p><span class=\"image right\"><img src=\"/images/conferences/Jenkins-World_125x125.png\" alt=\"Jenkins World\"></span></p>\n</div>\n<div class=\"paragraph\">\n<p>I don&#8217;t think I have ever met a tools, infrastructure, or operations team that\ndid not have a ton of work to do. The Jenkins project&#8217;s\n<a href=\"https://github.com/jenkins-infra\">infrastructure</a>\n\"team\" is no different; too much work, not enough time. In lieu of hiring more\npeople, which isn&#8217;t always an option, I have found heavy automation and\ncontinuous delivery pipelines to be two solutions within reach of the\nover-worked infrastructure team.</p>\n</div>\n<div class=\"paragraph\">\n<p>As a big believer in the concept of \"Infrastructure as Code\", I have been,\nslowly but surely, moving the project&#8217;s infrastructure from manual tasks to\ncode, whether implemented in our\n<a href=\"https://github.com/jenkins-infra/jenkins-infra\">Puppet code-base</a>,\n<a href=\"https://github.com/jenkins-infra/ircbot\">Docker containers</a>,\nor even as\n<a href=\"https://github.com/jenkins-infra/azure/tree/master/machines\">machine specifications</a>\nwith\n<a href=\"https://packer.io\">Packer</a>.\nThe more of our infrastructure that is <em>code</em>, the more we can apply continuous\ndelivery practices to consistently and reliably build, test and deliver our\ninfrastructure.</p>\n</div>\n<div class=\"paragraph\">\n<p>This approach integrates nicely with\n<a href=\"/doc/pipeline\">Jenkins Pipeline</a>,\nallowing us to also define our continuous delivery pipelines themselves as\ncode. For example, by sanity-checking our BIND zone files:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"title\">Jenkinsfile</div>\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-groovy\" data-lang=\"groovy\">node('docker') {\n    def dockerImage = 'rtyler/jenkins-infra-builder'\n\n    checkout scm\n    docker.image(dockerImage).inside {\n        sh \"/usr/sbin/named-checkzone jenkins-ci.org dist/profile/files/bind/jenkins-ci.org.zone\"\n        sh \"/usr/sbin/named-checkzone jenkins.io dist/profile/files/bind/jenkins.io.zone\"\n    }\n}</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>Or delivering our Docker containers automatically to\n<a href=\"https://hub.docker.com\">Docker Hub</a>\n, with a <code>Jenkinsfile</code> such as:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"title\">Jenkinsfile</div>\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-groovy\" data-lang=\"groovy\">node('docker') {\n    checkout scm\n\n    /* Get our abbreviated SHA-1 to uniquely identify this build */\n    def shortCommit = sh(script: 'git rev-parse HEAD', returnStdout: true).take(6)\n\n    stage 'Build ircbot' {\n        withEnv([\"JAVA_HOME=${tool 'jdk8'}\", \"PATH+MVN=${tool 'mvn'}/bin\"]) }\n            sh 'make bot'\n        }\n    }\n\n    def whale\n    stage 'Build container' {\n        whale = docker.build(\"jenkinsciinfra/ircbot:build${shortCommit}\")\n    }\n\n    stage 'Deploy container' {\n        /* Push to Docker Hub */\n        whale.push()\n    }\n}</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>In\n<a href=\"https://www.cloudbees.com/continuous-delivery-infrastructure-jenkins\">my talk at Jenkins World</a>\n(September 14th, 3:00 - 3:45pm in Exhibit Hall A-1) I will discuss these\nJenkinsfiles along with some of the strategies, patterns and code used with the\nJenkins project&#8217;s\n<a href=\"https://github.com/jenkins-infra\">open source</a>\ninfrastructure to get the most out of the team&#8217;s limited time.</p>\n</div>\n<div class=\"admonitionblock caution\">\n<table>\n<tr>\n<td class=\"icon\">\n<i class=\"fa icon-caution\" title=\"Caution\"></i>\n</td>\n<td class=\"content\">\n<div class=\"paragraph\">\n<p>R Tyler will be\n<a href=\"https://www.cloudbees.com/continuous-delivery-infrastructure-jenkins\">presenting</a>\nmore about continous delivery of infrastructure at\n<a href=\"https://www.cloudbees.com/jenkinsworld/home\">Jenkins World</a>\nin September.  Register with the code <code>JWFOSS</code> for 20% off your full conference\npass.</p>\n</div>\n</td>\n</tr>\n</table>\n</div>","id":"51fd82b2-e6d8-562f-a3a7-329013385e5a","title":"Continuous Delivery of Infrastructure with Jenkins","date":"2016-09-08T00:00:00.000Z","slug":"/blog/2016/09/08/continuous-delivery-of-infra/","links":{"discourse":""},"authors":[{"avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/gatsby-jenkins-io/static/c98b6de76465e89f9f5e5b331e9abfea/19e71/rtyler.jpg","srcSet":"/gatsby-jenkins-io/static/c98b6de76465e89f9f5e5b331e9abfea/77b35/rtyler.jpg 32w,\n/gatsby-jenkins-io/static/c98b6de76465e89f9f5e5b331e9abfea/d4a57/rtyler.jpg 64w,\n/gatsby-jenkins-io/static/c98b6de76465e89f9f5e5b331e9abfea/19e71/rtyler.jpg 128w,\n/gatsby-jenkins-io/static/c98b6de76465e89f9f5e5b331e9abfea/68974/rtyler.jpg 256w","sizes":"(min-width: 128px) 128px, 100vw"},"sources":[{"srcSet":"/gatsby-jenkins-io/static/c98b6de76465e89f9f5e5b331e9abfea/ef6ff/rtyler.webp 32w,\n/gatsby-jenkins-io/static/c98b6de76465e89f9f5e5b331e9abfea/8257c/rtyler.webp 64w,\n/gatsby-jenkins-io/static/c98b6de76465e89f9f5e5b331e9abfea/6766a/rtyler.webp 128w,\n/gatsby-jenkins-io/static/c98b6de76465e89f9f5e5b331e9abfea/22bfc/rtyler.webp 256w","type":"image/webp","sizes":"(min-width: 128px) 128px, 100vw"}]},"width":128,"height":128}}},"blog":"http://unethicalblogger.com","github":"rtyler","html":"<div class=\"paragraph\">\n<p>R&#46; Tyler Croy has been part of the Jenkins project for the past seven years.\nWhile avoiding contributing any Java code, Tyler is involved in many of the\nother aspects of the project which keep it running, such as this website,\ninfrastructure, governance, etc.</p>\n</div>","id":"rtyler","irc":null,"linkedin":null,"name":"R. Tyler Croy","slug":"/blog/author/rtyler","twitter":"agentdero"}]}},"pageContext":{"next":"/blog/2016/09/09/take-the-2016-jenkins-survey-blog/","previous":"/blog/2016/09/07/pipeline-at-jenkins-world/","id":"51fd82b2-e6d8-562f-a3a7-329013385e5a"}},
    "staticQueryHashes": ["1271460761","3649515864"]}