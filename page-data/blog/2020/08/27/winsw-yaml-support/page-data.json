{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/blog/2020/08/27/winsw-yaml-support/",
    "result": {"data":{"blog":{"html":"<div class=\"paragraph\">\n<p>Hello, world! GSoC 2020 Phase 3 has ended now and it was a great period for thw <em>Jenkins Windows Services - YAML Configuration Support</em> project.\nIn this blog post, I will announce the updates during the GSoC 2020 - Phase 2 and Phase 3. If you are not already aware of this project,\nI would recommend reading <a href=\"https://www.jenkins.io/blog/2020/07/08/winsw-yaml-support/\">this blog post</a> which was published after GSoC 2020 - Phase 1.</p>\n</div>\n<div class=\"sect1\">\n<h2 id=\"project-scope\"><a class=\"anchor\" href=\"#project-scope\"></a>Project Scope</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Windows Service Wrapper - YAML configuration support</p>\n</li>\n<li>\n<p>YAML schema validation</p>\n</li>\n<li>\n<p>New CLI</p>\n</li>\n<li>\n<p>XML Schema validation</p>\n</li>\n</ul>\n</div>\n<div class=\"sect2\">\n<h3 id=\"yaml-configuration-support\"><a class=\"anchor\" href=\"#yaml-configuration-support\"></a>YAML Configuration Support</h3>\n<div class=\"paragraph\">\n<p>Under WinSW - YAML configurations support, these tasks will be done.</p>\n</div>\n<div class=\"sect3\">\n<h4 id=\"yaml-to-object-mapping\"><a class=\"anchor\" href=\"#yaml-to-object-mapping\"></a>YAML to Object mapping</h4>\n<div class=\"paragraph\">\n<p>At the moment YAML object mapping is finished and merged.\nYou can find all the implementations in this <a href=\"https://github.com/winsw/winsw/pull/543\">Pull Request</a>.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"extend-winsw-to-support-both-xml-and-yaml\"><a class=\"anchor\" href=\"#extend-winsw-to-support-both-xml-and-yaml\"></a>Extend WinSW to support both XML and YAML</h4>\n<div class=\"paragraph\">\n<p>This task is already done and merged. Find the implementation in this <a href=\"https://github.com/winsw/winsw/pull/543\">Pull Request</a>.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"yaml-configuration-support-for-extensions\"><a class=\"anchor\" href=\"#yaml-configuration-support-for-extensions\"></a>YAML Configuration support for Extensions</h4>\n<div class=\"paragraph\">\n<p>At the moment there are 2 internal plugins in WinSW. RunAwayProcessKiller and SharedDirectoryMapper.\nWe allow users to provide configurations for those plugins in the same XML and YAML configuration file which is used to configure WinSW. This task is merged as well.\n<a href=\"https://github.com/winsw/winsw/pull/638\">Pull Request</a></p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"yaml-schema-validation\"><a class=\"anchor\" href=\"#yaml-schema-validation\"></a>YAML schema validation</h4>\n<div class=\"paragraph\">\n<p>Users can validate YAML configuration file against <a href=\"https://github.com/winsw/winsw/blob/master/doc/yamlConfigurationSchema.json\">JSON schema file.</a>\nUsers can use <a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml\">YAML utility tool from Visual Studio market place</a> to validate YAML config file against JSON schema.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"key-updates-in-phase-2-and-phase-3\"><a class=\"anchor\" href=\"#key-updates-in-phase-2-and-phase-3\"></a>Key updates in Phase 2 and Phase 3</h4>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>YAML Configuration structure</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Environment variables</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Now users can provide environment variables as a sequence of dictionaries that contains name and value for environment variables.</p>\n</li>\n</ul>\n</div>\n</li>\n<li>\n<p>TimeStamp values</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Users can specify timestamp values in the same manner used in XML (e.g. <code>10 ms</code>, <code>5 sec</code>, <code>3 min</code>)</p>\n</li>\n</ul>\n</div>\n</li>\n</ul>\n</div>\n</li>\n<li>\n<p>YAML configuration document was published. <a href=\"https://github.com/winsw/winsw/blob/master/doc/YamlConfigFile.md\">YAML Configuration Specification</a></p>\n</li>\n<li>\n<p>Extend the WinSW to support both XML and YAML</p>\n</li>\n<li>\n<p><a href=\"https://github.com/winsw/winsw/blob/master/doc/extensions/extensions.md\">YAML support for extensions</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/winsw/winsw/blob/master/doc/yamlConfigurationSchema.json\">YAML schema validation against JSON schema</a></p>\n</li>\n</ul>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"sample-yaml-configuration-file\"><a class=\"anchor\" href=\"#sample-yaml-configuration-file\"></a>Sample YAML Configuration File</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-yaml\" data-lang=\"yaml\">id: jenkins\nname: Jenkins\ndescription: This service runs Jenkins automation server.\nenv:\n    - name: JENKINS_HOME\n      value: '%LocalAppData%\\Jenkins.jenkins'\n    - name: LM_LICENSE_FILE\n      value: host1;host2\nexecutable: java\narguments: &gt;-\n    -Xrs -Xmx256m -Dhudson.lifecycle=hudson.lifecycle.WindowsServiceLifecycle\n    -jar \"E:\\Winsw Test\\yml6\\jenkins.war\" --httpPort=8081\nlog:\n    mode: rotate\nonFailure:\n    - action: restart\n      delay: 10 sec\n    - action: reboot\n      delay: 1 hour\nextensions:\n    - id: killOnStartup\n      enabled: yes\n      classname: WinSW.Plugins.RunawayProcessKiller.RunawayProcessKillerExtension\n      settings:\n            pidfile: '%BASE%\\pid.txt'\n            stopTimeOut: 5000\n            StoprootFirst: false\n    - id: mapNetworDirs\n      enabled: yes\n      classname: WinSW.Plugins.SharedDirectoryMapper.SharedDirectoryMapper\n      settings:\n            mapping:\n                - enabled: false\n                  label: N\n                  uncpath: \\\\UNC\n                - enabled: false\n                  label: M\n                  uncpath: \\\\UNC2</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"new-cli\"><a class=\"anchor\" href=\"#new-cli\"></a>New CLI</h3>\n<div class=\"paragraph\">\n<p>Let me explain in brief, why we need a new CLI.\nIn WinSW, we will keep both XML and YAML configuration support.\nBut according to the current implementation, the user can&#8217;t specify the configurations file explicitly.\nAlso, we want to let the user skip the schema validation as well.\nSo We decided to move into new CLI which is more structured with commands and options.\nPlease read my <a href=\"https://www.jenkins.io/blog/2020/07/08/winsw-yaml-support/\">previous blog post</a> to learn more about commands and options in the new CLI.</p>\n</div>\n<div class=\"sect3\">\n<h4 id=\"key-updates-in-phase-2-and-phase-3-2\"><a class=\"anchor\" href=\"#key-updates-in-phase-2-and-phase-3-2\"></a>Key updates in Phase 2 and Phase 3</h4>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Remove the /redirect command</p>\n</li>\n<li>\n<p><strong>testwait</strong> command was removed and add the <strong>wait</strong> option to the <strong>test</strong> command.</p>\n</li>\n<li>\n<p><strong>stopwait</strong> command was removed and add the <strong>wait</strong> option to the <strong>stop</strong> command.</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"how-to-try\"><a class=\"anchor\" href=\"#how-to-try\"></a>How to try</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>User can configure the Windows Service Wrapper by both XML and YAML configuration files using the following steps.</p>\n</div>\n<div class=\"olist arabic\">\n<ol class=\"arabic\">\n<li>\n<p>Create the configuration file (XML or YAML).</p>\n</li>\n<li>\n<p>Save it with the same name as the Windows Service Wrapper executable name.</p>\n</li>\n<li>\n<p>Place the configuration file inside the directory(or in a parent directory), where the Windows Service Wrapper executable is located.</p>\n</li>\n</ol>\n</div>\n<div class=\"paragraph\">\n<p>If there are both XML and YAML configuraiton files, Windows Service Wrapper will be configured by the XML configuration file.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"gsoc-2020-phase-2-demo\"><a class=\"anchor\" href=\"#gsoc-2020-phase-2-demo\"></a>GSoC 2020 Phase 2 Demo</h2>\n<div class=\"sectionbody\">\n<div class=\"videoblock\">\n<div class=\"content\">\n<iframe width=\"640\" height=\"360\" src=\"https://www.youtube.com/embed/9qyo1f2rKQw?rel=0&amp;start=2736&amp;end=4000\" frameborder=\"0\" allowfullscreen></iframe>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"gsoc-2020-phase-3-demo\"><a class=\"anchor\" href=\"#gsoc-2020-phase-3-demo\"></a>GSoC 2020 Phase 3 Demo</h2>\n<div class=\"sectionbody\">\n<div class=\"videoblock\">\n<div class=\"content\">\n<iframe width=\"640\" height=\"360\" src=\"https://www.youtube.com/embed/G05unV7aDrg?rel=0&amp;start=2736&amp;end=4000\" frameborder=\"0\" allowfullscreen></iframe>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"future-works\"><a class=\"anchor\" href=\"#future-works\"></a>Future Works</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p>XML Schema validation</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>XML configuration file will be validated with the XSD file.\nI have started working on this feature and you can find the implementation in this <a href=\"https://github.com/winsw/winsw/pull/460\">Pull Request</a>.</p>\n</li>\n</ul>\n</div>\n</li>\n<li>\n<p>YAML Configuration validate on startup</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"how-to-contribute\"><a class=\"anchor\" href=\"#how-to-contribute\"></a>How to contribute</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>You can find the GitHub repository in this <a href=\"https://github.com/winsw/winsw\">link</a>.\nIssues and Pull requests are always welcome. Also, you can communicate with us in the <a href=\"https://gitter.im/winsw/winsw\">WinSW Gitter</a> channel,\nwhich is a great way to get in touch and there are project sync up meetings every Tuesday at 13:30 UTC on the Gitter channel.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"some-useful-links\"><a class=\"anchor\" href=\"#some-useful-links\"></a>Some useful links</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://docs.google.com/presentation/d/1hMJwnI8nW33a-wb7JS3rmjelTPFCt4wEb0zVqGi5DiA/edit?usp=sharing\">Presentation Slides</a></p>\n</li>\n<li>\n<p><a href=\"/projects/gsoc/2020/projects/winsw-yaml-configs\">Project Page</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/winsw/winsw\">Project Repository</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/winsw/winsw/releases\">Feature preview</a></p>\n</li>\n<li>\n<p><a href=\"https://gitter.im/winsw/winsw\">Gitter Channel</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/aaubry/YamlDotNet\">YamlDotNet library</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/commandlineparser/commandline\">Command Line Parser library</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>","id":"ab88123c-a9df-5bf7-97c3-bc6cd5656a55","title":"Jenkins Windows Services: YAML Configuration Support - GSoC Project Results","date":"2020-08-27T00:00:00.000Z","slug":"/blog/2020/08/27/winsw-yaml-support/","authors":[{"avatar":null,"blog":null,"github":"buddhikac96","html":"","id":"buddhikac96","irc":null,"linkedin":null,"name":"Buddhika Chathuranga","slug":"/blog/authors/buddhikac96/","twitter":null}]}},"pageContext":{"id":"ab88123c-a9df-5bf7-97c3-bc6cd5656a55"}},
    "staticQueryHashes": ["1271460761","3649515864"]}