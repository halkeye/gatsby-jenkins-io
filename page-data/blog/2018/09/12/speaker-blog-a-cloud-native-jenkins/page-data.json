{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/blog/2018/09/12/speaker-blog-a-cloud-native-jenkins/",
    "result": {"data":{"blog":{"html":"<div class=\"imageblock right\">\n<div class=\"content\">\n<a class=\"image\" href=\"https://www.cloudbees.com/devops-world\"><img src=\"/images/conferences/devops-world-2018.jpg\" alt=\"DevOps World | Jenkins World 2018\"></a>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>A few months ago I published a\n<a href=\"/blog/2018/07/30/introducing-cloud-native-sig/\">blog post</a> about\n<a href=\"/sigs/cloud-native/\">Cloud Native Special Interest Group (SIG)</a>\nand ongoing projects related to Cloud Native Jenkins.\nNext week we will be presenting at DevOps World | Jenkins World together with Carlos Sanchez and Jesse Glick,\nso I would like to provide a heads up for\n<a href=\"https://devopsworldjenkinsworld2018.sched.com/event/F9NT/a-cloud-native-jenkins\">our talk: “A Cloud Native Jenkins”</a>.</p>\n</div>\n<div class=\"paragraph\">\n<p>In our talk, we will focus on the following topics: Pluggable Storage,\nour ephemeral Jenkins controllers experiments,\nand tools which may be used to implement single-shot controllers.</p>\n</div>\n<div class=\"sect1\">\n<h2 id=\"pluggable-storage\"><a class=\"anchor\" href=\"#pluggable-storage\"></a>Pluggable Storage</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Pluggable storage is one of the major areas we have been working on over the last few months.\nThere are a number of parallel stories which are summarized on\n<a href=\"/sigs/cloud-native/pluggable-storage/\">this page</a>.\nThere has been significant progress in the areas of artifact storage, build logging and configuration storage.\nA number of Jenkins Enhancement Proposals were submitted and accepted,\nand there are plugin releases and prototypes for these stories.</p>\n</div>\n<div class=\"paragraph\">\n<p>During our talk we will discuss the current status of these stories and future plans.\nIn particular, we will cover the following areas and reference implementations:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Storing all your artifacts transparently, e.g. in a cloud service blob store like AWS S3.</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://plugins.jenkins.io/artifact-manager-s3\">Artifact Manager for S3 Plugin</a> is an implementation we have recently released</p>\n</li>\n</ul>\n</div>\n</li>\n<li>\n<p>Providing credentials from an external location.</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://plugins.jenkins.io/kubernetes-credentials-provider\">Kubernetes Credentials Provider</a> is one of the existing implementations for Kubernetes secrets</p>\n</li>\n</ul>\n</div>\n</li>\n<li>\n<p>Sending and retrieving the build logs from a cloud service.</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>We are working on reference implementations for <a href=\"https://github.com/jenkinsci/pipeline-log-fluentd-cloudwatch-plugin\">AWS CloudWatch Logs</a> and\n<a href=\"https://github.com/jenkinsci/external-logging-elasticsearch-plugin\">Elasticsearch</a></p>\n</li>\n</ul>\n</div>\n</li>\n<li>\n<p>Storing configuration data in external storage like Kubernetes Resources and SQL database</p>\n</li>\n<li>\n<p>Storing test results externally, e.g. in an SQL database or a specialized Test Management System</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>There are existing plugins for the areas above, but there is a difference in approach we have taken.\nInstead of creating new custom steps we extend Jenkins architecture in a way that the storage becomes <strong>transparent</strong> to users.\nFor example, with <a href=\"https://plugins.jenkins.io/artifact-manager-s3\">Artifact Manager for S3 Plugin</a> common <em>Archive Artifacts</em> steps\nwork transparently with Remote storage, as well as Jenkins Pipeline&#8217;s <code>stash()</code>/<code>unstash()</code> steps.</p>\n</div>\n<div class=\"paragraph\">\n<p>The reference implementations intentionally use different technologies so that we cover more scenarios.\nWe regularly discuss the implementations in the <a href=\"/sigs/cloud-native/\">Cloud Native SIG</a>,\nand we would appreciate your feedback.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"ephemeral-jenkins-controllers-research\"><a class=\"anchor\" href=\"#ephemeral-jenkins-controllers-research\"></a>Ephemeral Jenkins controllers research</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Want something new?\nSeveral days ago Kohsuke Kawaguchi, the creator of Jenkins, posted the\n<a href=\"/blog/2018/08/31/shifting-gears/\">Jenkins: Shifting Gears</a> article to summarize the plan for Jenkins evolution.\nCloud Native Jenkins is a critical part of this plan, and it is not “just Jenkins X”.\nThere are various architectural changes in Jenkins required to make this vision happen,\nand we plan to work on these changes in the Cloud Native SIG.</p>\n</div>\n<div class=\"paragraph\">\n<p>In our presentation, we will talk about our experiment with ephemeral Jenkins and single-shot controllers.\nIn this story we are creating a headless single-shot controller which starts in a container,\nexecutes a Pipeline build and pushes all the results to remote storage so that the container can just be deleted after completion.\nSuch a controller bundles plugins and self-configuration logic using “Configuration as Code”,\nso that it can start executing Pipelines in just a few seconds.\nOnce packaged, it can be invoked from CLI as simply as&#8230;&#8203;</p>\n</div>\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre class=\"nowrap\">docker run --rm -v $PWD/demo/Jenkinsfile:/workspace/Jenkinsfile onenashev/cwp-jenkinsfile-runner-demo</pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>or, in Kubernetes:</p>\n</div>\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre class=\"nowrap\">kubectl create configmap jenkinsfile --from-file=demo/Jenkinsfile\nkubectl create -f demo/kubernetes.yaml</pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>Such a single-shot controller could also be made a part of a Cloud Native Jenkins system.\nStandard event handlers like Prow can invoke the builds on webhooks and report results back,\nso that the single-shot controller can be used to build pull requests or to run Continuous Delivery flows.\nExtra agents could also be connected to the controller on-demand, using the Kubernetes plugin or sidecar containers.</p>\n</div>\n<div class=\"imageblock\">\n<div class=\"content\">\n<a class=\"image\" href=\"https://www.cloudbees.com/devops-world\"><img src=\"/images/post-images/2018-09-12-cloud-native-jenkins/single-shot-master-schema.png\" alt=\"Single-shot controller concept\"></a>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"tools\"><a class=\"anchor\" href=\"#tools\"></a>Tools</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>In order to make this experiment possible, we used a toolchain based on\nDocker,\n<a href=\"https://github.com/kohsuke/jenkinsfile-runner\">Jenkinsfile Runner</a>,\n<a href=\"https://github.com/jenkinsci/configuration-as-code-plugin\">Configuration as Code Plugin</a> (JCasC), and a\n<a href=\"https://github.com/jenkinsci/custom-war-packager\">Custom WAR Packager tool</a> which glues all the things together.</p>\n</div>\n<div class=\"paragraph\">\n<p><strong>Custom WAR Packager</strong> is a new tool which takes various configurations (YAML specification defining core version, list of plugins, system properties, Groovy Hooks, JCasC YAMLs)&#8230;&#8203;\nand then bundles everything as a ready-to-fly WAR file or Docker image.\nStarting from version <strong>1.2</strong>, Custom WAR Packager also supports packaging Jenkinsfile Runner images as an experimental feature.\nI will do a separate blogpost about this new tool later,\nbut there is already some documentation a number of <a href=\"https://github.com/jenkinsci/custom-war-packager#demo\">demos</a> in the project’s repo.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"our-demo\"><a class=\"anchor\" href=\"#our-demo\"></a>Our demo</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Yes, we will have a demo! We will show a single-shot controller running with Pluggable storage implementations for AWS environments (Amazon S3, AWS CloudWatch, EKS, etc.),\nwhich executes Jenkins Pipelines for Maven projects and provisions agents in Kubernetes on-demand.</p>\n</div>\n<div class=\"paragraph\">\n<p>The demo has to be published yes, but you can already find a more simple Jenkinsfile Runner demo\n<a href=\"https://github.com/jenkinsci/custom-war-packager/tree/master/demo/jenkinsfile-runner\">here</a>.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"want-to-know-more\"><a class=\"anchor\" href=\"#want-to-know-more\"></a>Want to know more?</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The upcoming <a href=\"https://www.cloudbees.com/devops-world\">DevOps World | Jenkins World conferences</a>\nare heavily packed with talks related to Cloud Native Jenkins,\nincluding war stories and presentations on projects like Jenkins X and Jenkins Evergreen.\nIt is a great chance to get more information about using Jenkins in cloud environments.</p>\n</div>\n<div class=\"paragraph\">\n<p>If you are a Jenkins contributor or just want to become a contributor,\nalso join the <a href=\"https://jenkins.io/blog/2018/07/25/contributor-summit/\">Contributor Summit</a> (Sep 17 in US and Oct 23 in Nice) or visit the Jenkins community booth in the Exhibition hall.\nAt the Contributor Summit on Sep 17 we will also have a face-to-face Cloud Native SIG meeting.\nFeel free to contribute to the agenda <a href=\"https://docs.google.com/document/d/1Hw1mpXSpH8BAe2YK5SrCfFuHQLRf__KnjDBK_SbhGls/edit\">here</a>.</p>\n</div>\n<div class=\"admonitionblock warning\">\n<table>\n<tr>\n<td class=\"icon\">\n<i class=\"fa icon-warning\" title=\"Warning\"></i>\n</td>\n<td class=\"content\">\n<div class=\"paragraph\">\n<p>Come meet Carlos, Jesse, Oleg, and other Cloud Native SIG members at\n<a href=\"https://www.cloudbees.com/devops-world\">Jenkins World</a> on September 16-19th in San Francisco and on October 22-25 in Nice.\nregister with the code <code>JWFOSS</code> for a 30% discount off your pass.</p>\n</div>\n</td>\n</tr>\n</table>\n</div>\n</div>\n</div>","id":"25b519ed-5da4-5f9a-a173-6ea9a343b90a","title":"Speaker blogpost: A Cloud Native Jenkins","date":"2018-09-12T00:00:00.000Z","slug":"/blog/2018/09/12/speaker-blog-a-cloud-native-jenkins/","links":{"discourse":""},"authors":[{"avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#b8c8e8","images":{"fallback":{"src":"/gatsby-jenkins-io/static/611f92ce782a36a3a1454a29c79753db/bf8e1/oleg_nenashev.png","srcSet":"/gatsby-jenkins-io/static/611f92ce782a36a3a1454a29c79753db/914ee/oleg_nenashev.png 32w,\n/gatsby-jenkins-io/static/611f92ce782a36a3a1454a29c79753db/1c9ce/oleg_nenashev.png 64w,\n/gatsby-jenkins-io/static/611f92ce782a36a3a1454a29c79753db/bf8e1/oleg_nenashev.png 128w,\n/gatsby-jenkins-io/static/611f92ce782a36a3a1454a29c79753db/acb7c/oleg_nenashev.png 256w","sizes":"(min-width: 128px) 128px, 100vw"},"sources":[{"srcSet":"/gatsby-jenkins-io/static/611f92ce782a36a3a1454a29c79753db/ef6ff/oleg_nenashev.webp 32w,\n/gatsby-jenkins-io/static/611f92ce782a36a3a1454a29c79753db/8257c/oleg_nenashev.webp 64w,\n/gatsby-jenkins-io/static/611f92ce782a36a3a1454a29c79753db/6766a/oleg_nenashev.webp 128w,\n/gatsby-jenkins-io/static/611f92ce782a36a3a1454a29c79753db/22bfc/oleg_nenashev.webp 256w","type":"image/webp","sizes":"(min-width: 128px) 128px, 100vw"}]},"width":128,"height":128}},"publicURL":"/gatsby-jenkins-io/static/611f92ce782a36a3a1454a29c79753db/oleg_nenashev.png"},"blog":"https://oleg-nenashev.github.io/","github":"oleg-nenashev","html":"<div class=\"paragraph\">\n<p>Jenkins core maintainer and board member.\nOleg started using Hudson for Hardware/Embedded projects in 2008 and became an active Jenkins contributor in 2012.\nNowadays he leads several Jenkins <a href=\"/sigs\">SIGs</a>, outreach programs (<a href=\"/projects/gsoc\">Google Summer of Code</a>, <a href=\"/events/hacktoberfest\">Hacktoberfest</a>) and <a href=\"/projects/jam/\">Jenkins meetups</a> in Switzerland and Russia.\nOleg works for <a href=\"https://www.cloudbees.com/\">CloudBees</a> and focuses on key projects in the community.</p>\n</div>","id":"oleg_nenashev","irc":"oleg_nenashev","linkedin":"onenashev","name":"Oleg Nenashev","slug":"/blog/authors/oleg_nenashev/","twitter":"oleg_nenashev"}]}},"pageContext":{"id":"25b519ed-5da4-5f9a-a173-6ea9a343b90a"}},
    "staticQueryHashes": ["1271460761","3649515864"]}