{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/blog/2018/07/23/javadoc-service-improvements/",
    "result": {"data":{"blog":{"html":"<div class=\"paragraph\">\n<p>Jenkins infrastructure is continuously improving.\nThe latest service to get some attention and major improvement is the Jenkins javadoc.</p>\n</div>\n<div class=\"paragraph\">\n<p>There were a number of issues affecting that service:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://issues.jenkins.io/browse/INFRA-1600\">Irregular updates</a> -\nDevelopers wouldnâ€™t find the latest java documentation because of inadequate update frequence.</p>\n</li>\n<li>\n<p><a href=\"https://issues.jenkins.io/browse/INFRA-1387\">Broken HTTPS support</a> -\nwhen users would go to the Javadoc site they would get an unsafe site warning and then an incorrect redirection.</p>\n</li>\n<li>\n<p>Obsolete content - Javadoc was not cleaned up correctly and plenty of obsolete pages remained which confused end users.</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>As Jenkins services\n<a href=\"https://jenkins.io/blog/2016/05/18/announcing-azure-partnership\">migrate to Azure infrastructure</a>,\nsomething that needed to be done was to move the javadoc service there as a standalone service.\nI took the same approach as jenkins.io, putting data on an azure file storage, using a nginx proxy in front of it and running on kubernetes.\nThis approach brings multiple benefits:</p>\n</div>\n<div class=\"olist arabic\">\n<ol class=\"arabic\">\n<li>\n<p>We store static files on an azure file storage which brings data reliability, redundancy, etc.</p>\n</li>\n<li>\n<p>We use Kubernetes Ingress to configure HTTP/HTTPS endpoint</p>\n</li>\n<li>\n<p>We use Kubernetes Service to provide load balancing</p>\n</li>\n<li>\n<p>We use Kubernetes deployment to deploy default nginx containers with azure file storage volume.</p>\n</li>\n</ol>\n</div>\n<div class=\"listingblock\">\n<div class=\"title\">HTTP/HTTPS workflow</div>\n<div class=\"content\">\n<pre class=\"nowrap\">  +----------------------+     goes on     +------------------------------+\n  |  Jenkins Developer   |----------------&gt;+  https://javadoc.jenkins.io  |\n  +----------------------+                 +------------------------------+\n                                                                      |\n  +-------------------------------------------------------------------|---------+\n  | Kubernetes Cluster:                                               |         |\n  |                                                                   |         |\n  | +---------------------+     +-------------------+     +-----------v------+  |\n  | | Deployment: Javadoc |     | Service: javadoc  &lt;-----| Ingress: javadoc |  |\n  + +---------------------+     +-------------------+     +------------------+  |\n  |                                           |                                 |\n  |                          -----------------+                                 |\n  |                          |                |                                 |\n  |                          |                |                                 |\n  | +------------------------v--+    +--------v------------------+              |\n  | | Pod: javadoc              |    | Pod: javadoc              |              |\n  | | container: \"nginx:alpine\" |    | container: \"nginx:alpine\" |              |\n  | | +-----------------------+ |    | +-----------------------+ |              |\n  | | | Volume:               | |    | | Volume:               | |              |\n  | | | /usr/share/nginx/html | |    | | /usr/share/nginx/html | |              |\n  | | +-------------------+---+ |    | +----+------------------+ |              |\n  | +---------------------|-----+    +------|--------------------+              |\n  |                       |                 |                                   |\n  +-----------------------|-----------------|-----------------------------------+\n                          |                 |\n                          |                 |\n                       +--+-----------------+-----------+\n                       |   Azure File Storage: javadoc  |\n                       +--------------------------------+</pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>The javadoc static files are now generated by a Jenkins\n<a href=\"https://ci.jenkins.io/job/Infra/job/javadoc/\">job</a> regularly and then published from a trusted jenkins instance.\nWe only update what has changed and remove obsolete documents.\nMore information can be find\n<a href=\"https://github.com/jenkins-infra/javadoc/blob/master/Jenkinsfile\">here</a></p>\n</div>\n<div class=\"paragraph\">\n<p>The next thing in continuously improving is also to look at the user experience of the javadoc to make it easier to discover javadoc for other components or versions.\n(<a href=\"https://issues.jenkins.io/browse/INFRA-1717\">Help Needed</a>)</p>\n</div>\n<div class=\"paragraph\">\n<p>These changes all go towards improving the developer experience for those using javadocs and making life easier for core and plugin developers.\nSee the new and improved javadoc service here\n<a href=\"https://jenkins.io/doc/developer/javadoc/\">Jenkins Javadoc</a>.</p>\n</div>","id":"bc08dba7-169b-5284-bbaa-6f3d64408472","title":"Jenkins Javadoc: Service Improvements","date":"2018-07-23T00:00:00.000Z","slug":"/blog/2018/07/23/javadoc-service-improvements/","links":{"discourse":""},"authors":[{"avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#181818","images":{"fallback":{"src":"/gatsby-jenkins-io/static/f6d731c7e61ff5c7f0ddc7f2b8a6671e/bf8e1/olblak.png","srcSet":"/gatsby-jenkins-io/static/f6d731c7e61ff5c7f0ddc7f2b8a6671e/914ee/olblak.png 32w,\n/gatsby-jenkins-io/static/f6d731c7e61ff5c7f0ddc7f2b8a6671e/1c9ce/olblak.png 64w,\n/gatsby-jenkins-io/static/f6d731c7e61ff5c7f0ddc7f2b8a6671e/bf8e1/olblak.png 128w,\n/gatsby-jenkins-io/static/f6d731c7e61ff5c7f0ddc7f2b8a6671e/acb7c/olblak.png 256w","sizes":"(min-width: 128px) 128px, 100vw"},"sources":[{"srcSet":"/gatsby-jenkins-io/static/f6d731c7e61ff5c7f0ddc7f2b8a6671e/ef6ff/olblak.webp 32w,\n/gatsby-jenkins-io/static/f6d731c7e61ff5c7f0ddc7f2b8a6671e/8257c/olblak.webp 64w,\n/gatsby-jenkins-io/static/f6d731c7e61ff5c7f0ddc7f2b8a6671e/6766a/olblak.webp 128w,\n/gatsby-jenkins-io/static/f6d731c7e61ff5c7f0ddc7f2b8a6671e/22bfc/olblak.webp 256w","type":"image/webp","sizes":"(min-width: 128px) 128px, 100vw"}]},"width":128,"height":128}},"publicURL":"/gatsby-jenkins-io/static/f6d731c7e61ff5c7f0ddc7f2b8a6671e/olblak.png"},"blog":null,"github":"olblak","html":"<div class=\"paragraph\">\n<p>Olivier is the Jenkins infrastructure officer and Senior Operations Engineer at CloudBees.\nAs a regular contributor to the Jenkins infrastructure projects, he works on a wide range of tasks from services reliability to applications maintenance.</p>\n</div>","id":"olblak","irc":"olblak","linkedin":null,"name":"Olivier Vernin","slug":"/blog/authors/olblak/","twitter":"0lblak"}]}},"pageContext":{"id":"bc08dba7-169b-5284-bbaa-6f3d64408472"}},
    "staticQueryHashes": ["1271460761","3649515864"]}