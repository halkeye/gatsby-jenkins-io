{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/blog/2018/05/08/jenkins-x-anchore/",
    "result": {"data":{"blog":{"html":"<div class=\"paragraph\">\n<p><a href=\"https://anchore.io/\">Anchore</a> provides docker image analysis for user defined acceptance policies to allow automated image validation and acceptance.</p>\n</div>\n<div class=\"paragraph\">\n<p>As developers we would like to know if a change we are proposing introduces a\n<a href=\"https://en.wikipedia.org/wiki/Common_Vulnerabilities_and_Exposures\">Common Vulnerability and Exposure (CVE)</a>.\nAs operators we would like to know what running applications are affected if a new CVE is discovered.</p>\n</div>\n<div class=\"paragraph\">\n<p>Now in Jenkins X pipelines, if we find an\n<a href=\"https://anchore.com/engine/\">Anchore engine</a> service running we will add the preview and release images to be analyzed.\nThis means we can look at any environment including previews (created from Pull Requests)\nto see if your application contains a CVE.</p>\n</div>\n<div class=\"sect1\">\n<h2 id=\"upgrade\"><a class=\"anchor\" href=\"#upgrade\"></a>Upgrade</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Start by checking your current Jenkins X version:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-bash\" data-lang=\"bash\">jx version</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>If your Jenkins X platform is older than 0.0.903, then first you will need to upgrade to at least 0.0.922:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-bash\" data-lang=\"bash\">jx upgrade cli\njx upgrade platform</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"install-addon\"><a class=\"anchor\" href=\"#install-addon\"></a>Install addon</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>You can install the\n<a href=\"https://hub.kubeapps.com/charts/stable/anchore-engine\">Anchore engine addon</a>\nwhen you are in your Jenkins X team <code>home</code> environment.</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-bash\" data-lang=\"bash\">jx env dev\njx create addon anchore</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>This will install the engine in a seperate <code>anchore</code> namespace\nand create a service link in the current team <code>home</code> environment\nso our pipeline builds can add docker images to Anchore for analysis.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"create-an-application\"><a class=\"anchor\" href=\"#create-an-application\"></a>Create an application</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>You can now create a new quickstart:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-bash\" data-lang=\"bash\">jx create quickstart</code></pre>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"list-any-cves\"><a class=\"anchor\" href=\"#list-any-cves\"></a>List any CVEs</h3>\n<div class=\"paragraph\">\n<p>Once the build has run you will be able to check for CVEs in any environment incluing previews created for pull requests.</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-bash\" data-lang=\"bash\">jx get cve --environment staging</code></pre>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"demo\"><a class=\"anchor\" href=\"#demo\"></a>Demo</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Here&#8217;s a 4 minute video that demonstrates the steps above:</p>\n</div>\n<div class=\"videoblock\">\n<div class=\"content\">\n<iframe src=\"https://www.youtube.com/embed/rB8Sw0FqCQk?rel=0\" frameborder=\"0\" allowfullscreen></iframe>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"upgrading-existing-pipelines\"><a class=\"anchor\" href=\"#upgrading-existing-pipelines\"></a>Upgrading existing pipelines</h3>\n<div class=\"paragraph\">\n<p>If you have an existing application pipeline and and want enable image analysis you can update your Jenkinsfile,\nin the <code>preview</code> stage after the skaffold step add the line</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-groovy\" data-lang=\"groovy\">sh \"jx step validate --min-jx-version 1.2.36\"\nsh \"jx step post build --image \\$JENKINS_X_DOCKER_REGISTRY_SERVICE_HOST:\\$JENKINS_X_DOCKER_REGISTRY_SERVICE_PORT/$ORG/$APP_NAME:$PREVIEW_VERSION\"</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>In the <code>master</code> stage the add this line after the skaffold step</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-groovy\" data-lang=\"groovy\">sh \"jx step validate --min-jx-version 1.2.36\"\nsh \"jx step post build --image \\$JENKINS_X_DOCKER_REGISTRY_SERVICE_HOST:\\$JENKINS_X_DOCKER_REGISTRY_SERVICE_PORT/$ORG/$APP_NAME:\\$(cat VERSION)\"</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>For any questions please find us - we mainly hang out on Slack at\n<a href=\"https://kubernetes.slack.com/messages/C9LTHT2BB\">#jenkins-x-dev</a> - or see\n<a href=\"https://jenkins-x.io/community/\">jenkins-x.io/community</a> for other channels.</p>\n</div>\n</div>\n</div>\n</div>","id":"29ad061f-dba2-536d-91b4-878d290af36d","title":"Jenkins X: Announcing CVE docker image analysis with Anchore","date":"2018-05-08T00:00:00.000Z","slug":"/blog/2018/05/08/jenkins-x-anchore/","authors":[{"avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#c8e8f8","images":{"fallback":{"src":"/gatsby-jenkins-io/static/8f3e9e2f521cb211e3ccac77dc47d04f/19e71/jrawlings.jpg","srcSet":"/gatsby-jenkins-io/static/8f3e9e2f521cb211e3ccac77dc47d04f/77b35/jrawlings.jpg 32w,\n/gatsby-jenkins-io/static/8f3e9e2f521cb211e3ccac77dc47d04f/d4a57/jrawlings.jpg 64w,\n/gatsby-jenkins-io/static/8f3e9e2f521cb211e3ccac77dc47d04f/19e71/jrawlings.jpg 128w,\n/gatsby-jenkins-io/static/8f3e9e2f521cb211e3ccac77dc47d04f/68974/jrawlings.jpg 256w","sizes":"(min-width: 128px) 128px, 100vw"},"sources":[{"srcSet":"/gatsby-jenkins-io/static/8f3e9e2f521cb211e3ccac77dc47d04f/ef6ff/jrawlings.webp 32w,\n/gatsby-jenkins-io/static/8f3e9e2f521cb211e3ccac77dc47d04f/8257c/jrawlings.webp 64w,\n/gatsby-jenkins-io/static/8f3e9e2f521cb211e3ccac77dc47d04f/6766a/jrawlings.webp 128w,\n/gatsby-jenkins-io/static/8f3e9e2f521cb211e3ccac77dc47d04f/22bfc/jrawlings.webp 256w","type":"image/webp","sizes":"(min-width: 128px) 128px, 100vw"}]},"width":128,"height":128}},"publicURL":"/gatsby-jenkins-io/static/8f3e9e2f521cb211e3ccac77dc47d04f/jrawlings.jpeg"},"blog":null,"github":"rawlingsj","html":"<div class=\"paragraph\">\n<p>James has a passion for continuous delivery and software automation in general.  Continually looking at\nways to help improve developers experience for the cloud.  James works on the OSS project <a href=\"https://jenkins-x.io/\">Jenkins X</a></p>\n</div>","id":"jrawlings","irc":null,"linkedin":null,"name":"James Rawlings","slug":"/blog/authors/jrawlings/","twitter":"jdrawlings"}]}},"pageContext":{"id":"29ad061f-dba2-536d-91b4-878d290af36d"}},
    "staticQueryHashes": ["1271460761","3649515864"]}